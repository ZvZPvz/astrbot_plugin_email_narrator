# astrbot_plugin_email_narrator

_âœ¨ [astrbot](https://github.com/AstrBotDevs/AstrBot) æ™ºèƒ½é‚®ä»¶æ’­æŠ¥æ’ä»¶ âœ¨_  
[![License](https://img.shields.io/badge/License-AGPLv3-purple.svg)](https://opensource.org/license/agpl-v3)
[![Python 3.10+](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://www.python.org/)
[![AstrBot](https://img.shields.io/badge/AstrBot-3.4%2B-orange.svg)](https://github.com/Soulter/AstrBot)
[![GitHub](https://img.shields.io/badge/ä½œè€…-ZvZPvz-blue)](https://github.com/ZvZPvz)

</div>

## âœ¨ åŠŸèƒ½ç‰¹æ€§

-   **æ™ºèƒ½æ’­æŠ¥**ï¼šåˆ©ç”¨ LLM å’Œäººæ ¼è®¾å®šï¼Œå°†å†°å†·çš„é‚®ä»¶é€šçŸ¥è½¬åŒ–ä¸ºç¬¦åˆæœºå™¨äººæ€§æ ¼çš„è‡ªç„¶è¯­è¨€å¯¹è¯ã€‚ç°åœ¨æ”¯æŒä¼ å…¥**å‘ä»¶äºº**å’Œ**æ”¶ä»¶äºº**ä¿¡æ¯ï¼Œè®©æ’­æŠ¥æ›´å…·ä¸Šä¸‹æ–‡ã€‚
-   **å¥å£®çš„é”™è¯¯å¤„ç†ä¸é‡è¯•**ï¼šå½“ LLM å¤„ç†å¤±è´¥æ—¶ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨é‡è¯•ï¼Œç¡®ä¿ä¸´æ—¶æ€§ç½‘ç»œæˆ–æœåŠ¡é—®é¢˜ä¸ä¼šå¯¼è‡´é‚®ä»¶ä¸¢å¤±ã€‚
-   **åå¤‡é€šçŸ¥æœºåˆ¶**ï¼šåœ¨è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å‘é€ä¸€æ¡åŒ…å«åŸå§‹é‚®ä»¶ä¿¡æ¯çš„**åå¤‡é€šçŸ¥**ï¼Œä¿è¯æ‚¨åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ”¶åˆ°æé†’ã€‚
-   **å›ºå®šç›®æ ‡æ¨¡å¼**ï¼šå¯é€‰æ‹©å°†é‚®ä»¶é€šçŸ¥é”å®šåˆ°é¢„è®¾çš„ä¼šè¯ç›®æ ‡ï¼Œç¦ç”¨æŒ‡ä»¤å¼€å…³ï¼Œé€‚åˆä½œä¸ºæœåŠ¡å™¨æˆ–å›¢é˜Ÿçš„ä¸“ç”¨é€šçŸ¥æ¸ é“ã€‚
-   **ä¼šè¯ç»§æ‰¿**ï¼šæ¯æ¬¡é‚®ä»¶æ’­æŠ¥éƒ½ä¼šè¢«è®°å…¥å¯¹è¯å†å²ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œè¿½é—®ç­‰ä¸Šä¸‹æ–‡ç›¸å…³çš„æ“ä½œã€‚
-   **æ°¸ä¸ä¸¢ä¿¡**ï¼šé‡‡ç”¨æŒä¹…åŒ–çš„ UID è¿½è¸ªæœºåˆ¶ï¼Œå³ä½¿æœºå™¨äººç¦»çº¿é‡å¯ï¼Œä¹Ÿèƒ½æ”¶åˆ°æ‰€æœ‰é”™è¿‡çš„é‚®ä»¶ã€‚
-   **å¤šè´¦æˆ·æ”¯æŒ**ï¼šå¯åŒæ—¶ç›‘æ§å¤šä¸ªä¸åŒçš„é‚®ç®±è´¦æˆ·ã€‚
-   **å…¨å¼‚æ­¥æ¶æ„**ï¼šåŸºäº `aioimaplib` é‡æ„ï¼Œæ€§èƒ½æ›´é«˜ï¼Œä¸ä¼šé˜»å¡ AstrBot ä¸»è¿›ç¨‹ã€‚

## ğŸ“¦ å®‰è£…

-   åœ¨ AstrBot æ’ä»¶å¸‚åœºå®‰è£…æˆ–ä¸‹è½½ä»“åº“ zip æ‰‹åŠ¨å®‰è£…ã€‚
-   **é‡è¦**: éœ€è¦åœ¨æ’ä»¶é…ç½®é‡Œè®¾ç½®é‚®ç®±å¸æˆ·åæ‰èƒ½ä½¿ç”¨ã€‚

### Gmail é…ç½®ç¤ºä¾‹
1.  åœ¨æ‚¨çš„ Google è´¦æˆ·ä¸­å¼€å¯ä¸¤æ­¥éªŒè¯ã€‚
2.  è¿›å…¥ [Google åº”ç”¨ä¸“ç”¨å¯†ç ](https://myaccount.google.com/apppasswords) é¡µé¢ã€‚
3.  ç”Ÿæˆä¸€ä¸ªæ–°çš„åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œå¹¶å°†æ­¤å¯†ç ç”¨äºæ’ä»¶é…ç½®ã€‚

## âš™ï¸ é…ç½®

å®‰è£…å¹¶å¯ç”¨æ’ä»¶åï¼Œè¯·åœ¨ AstrBot ç®¡ç†åå° -> æ’ä»¶å¸‚åœº -> å·²å®‰è£… -> Email Narrator ä¸­è¿›è¡Œé…ç½®ã€‚

1.  **é‚®ç®±è´¦æˆ·åˆ—è¡¨ (Accounts)**:
    è¿™æ˜¯æœ€é‡è¦çš„é…ç½®ã€‚è¯·**æ¯è¡Œå¡«å†™ä¸€ä¸ªè´¦æˆ·**ï¼Œæ ¼å¼ä¸º `imapæœåŠ¡å™¨,é‚®ç®±åœ°å€,åº”ç”¨å¯†ç `ã€‚
    ```
    imap.gmail.com,your.email@gmail.com,your_google_app_password
    imap.qq.com,123456@qq.com,your_qq_app_password
    ```

2.  **é¢„è®¾çš„æ¨é€ç›®æ ‡åˆ—è¡¨ (Preconfigured Targets)**:
    å¦‚æœä½ å¸Œæœ›æŸäº›ä¼šè¯ï¼ˆå¦‚ç®¡ç†å‘˜ç¾¤ï¼‰æ€»æ˜¯æ¥æ”¶é‚®ä»¶é€šçŸ¥ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å¼€å¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¡«å†™å®Œæ•´çš„ä¼šè¯IDã€‚
    -   å¦‚ä½•è·å–ä¼šè¯IDï¼Ÿåœ¨ç›®æ ‡ä¼šè¯ä¸­è§¦å‘æœºå™¨äººï¼Œç„¶åæŸ¥çœ‹ AstrBot WebUI â†’ æ›´å¤šåŠŸèƒ½ â†’ ä¼šè¯ç®¡ç†ï¼Œå¤åˆ¶ `æ¶ˆæ¯ä¼šè¯æ¥æº` å³å¯ã€‚æ ¼å¼å¦‚ï¼š`QQ:GroupMessage:12345678`ã€‚

3.  **å…¶ä»–é…ç½®**:
    -   **é‚®ä»¶æ£€æŸ¥é—´éš”**: è½®è¯¢é‚®ç®±çš„ç§’æ•°ï¼Œå»ºè®®è®¾ç½®ä¸º **30ç§’æˆ–æ›´é«˜**ï¼Œä»¥é¿å…IPè¢«å°é”ã€‚
    -   **é‚®ä»¶å†…å®¹é¢„è§ˆå­—ç¬¦ä¸Šé™**: æˆªå–é‚®ä»¶æ­£æ–‡çš„å‰ N ä¸ªå­—ç¬¦äº¤ç»™ LLM å¤„ç†ã€‚
    -   **æœ€å¤§é‡è¯•æ¬¡æ•°**: å½“ LLM å¤„ç†å¤±è´¥æ—¶ï¼Œåœ¨å‘é€åå¤‡é€šçŸ¥å‰çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚`0` è¡¨ç¤ºæ— é™é‡è¯•ã€‚
    -   **å›ºå®šæ¨é€ç›®æ ‡æ¨¡å¼**: å¯ç”¨åï¼Œ`on`/`off` æŒ‡ä»¤å°†å¤±æ•ˆï¼Œé‚®ä»¶åªä¼šæ¨é€åˆ°â€œé¢„è®¾çš„æ¨é€ç›®æ ‡åˆ—è¡¨â€ä¸­ã€‚
    -   **é‚®ä»¶æ’­æŠ¥æŒ‡ä»¤æ¨¡æ¿**: é«˜çº§åŠŸèƒ½ï¼Œå¯è‡ªå®šä¹‰å‘é€ç»™ LLM çš„æŒ‡ä»¤æ¨¡æ¿ã€‚ç°åœ¨æ”¯æŒ `{{sender}}` å’Œ `{{recipient}}` å˜é‡ã€‚

## âŒ¨ï¸ ä½¿ç”¨è¯´æ˜

### å‘½ä»¤

```plaintext
/email_narrator on
åˆ«å: /é‚®ä»¶æ’­æŠ¥ å¼€å¯
åŠŸèƒ½: åœ¨å½“å‰ä¼šè¯å¼€å¯é‚®ä»¶æ’­æŠ¥åŠŸèƒ½ã€‚
> â„¹ï¸ åœ¨â€œå›ºå®šæ¨é€ç›®æ ‡æ¨¡å¼â€ä¸‹ï¼Œæ­¤æŒ‡ä»¤å°†è¢«ç¦ç”¨ã€‚

/email_narrator off
åˆ«å: /é‚®ä»¶æ’­æŠ¥ å…³é—­
åŠŸèƒ½: åœ¨å½“å‰ä¼šè¯å…³é—­é‚®ä»¶æ’­æŠ¥åŠŸèƒ½ã€‚
> â„¹ï¸ åœ¨â€œå›ºå®šæ¨é€ç›®æ ‡æ¨¡å¼â€ä¸‹ï¼Œæ­¤æŒ‡ä»¤å°†è¢«ç¦ç”¨ã€‚

/email_narrator status
åˆ«å: /é‚®ä»¶æ’­æŠ¥ çŠ¶æ€
åŠŸèƒ½: æŸ¥çœ‹æ’ä»¶çš„å½“å‰è¿è¡ŒçŠ¶æ€ã€ç›‘æ§çš„è´¦å·æ•°é‡ã€è¿è¡Œæ¨¡å¼ç­‰ä¿¡æ¯ã€‚

/email_narrator check_accounts
åˆ«å: /é‚®ä»¶æ’­æŠ¥ æ£€æŸ¥è´¦å·
åŠŸèƒ½: (ä»…é™ç®¡ç†å‘˜) æµ‹è¯•æ‰€æœ‰å·²é…ç½®é‚®ç®±è´¦å·çš„è¿æ¥æ€§ï¼Œå¹¶è¿”å›çŠ¶æ€æŠ¥å‘Šã€‚
```

## âš ï¸ æ³¨æ„äº‹é¡¹ä¸å®‰å…¨

-   **éšç§**: æœ¬æ’ä»¶éœ€è¦å¤„ç†æ‚¨çš„é‚®ä»¶å†…å®¹æ‰èƒ½ç”Ÿæˆæ’­æŠ¥ã€‚æ‰€æœ‰å¤„ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚
-   **å®‰å…¨**: è¯·åŠ¡å¿…ä½¿ç”¨**åº”ç”¨å¯†ç  (App Password)** è€Œéæ‚¨çš„ä¸»å¯†ç æ¥é…ç½®é‚®ç®±è´¦æˆ·ï¼Œä»¥ä¿éšœè´¦æˆ·å®‰å…¨ã€‚
-   **çµæ„Ÿæ¥æº**: æœ¬æ’ä»¶çµæ„Ÿå’Œéƒ¨åˆ†å‚ç…§æ¥æºäº [DBJD-CR/astrbot_plugin_proactive_chat](https://github.com/DBJD-CR/astrbot_plugin_proactive_chat) å’Œ [OlyMarco/EmailNotixion](https://github.com/OlyMarco/EmailNotixion)ã€‚

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

-   ğŸŒŸ Star è¿™ä¸ªé¡¹ç›®ï¼ï¼ˆç‚¹å³ä¸Šè§’çš„æ˜Ÿæ˜Ÿï¼Œæ„Ÿè°¢æ”¯æŒï¼ï¼‰
-   ğŸ› æäº¤ Issue æŠ¥å‘Šé—®é¢˜
-   ğŸ’¡ æå‡ºæ–°åŠŸèƒ½å»ºè®®
-   ğŸ”§ æäº¤ Pull Request æ”¹è¿›ä»£ç 
